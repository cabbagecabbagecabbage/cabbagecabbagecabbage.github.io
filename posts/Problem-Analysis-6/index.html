<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Problem Analysis 6" /><meta property="og:locale" content="en" /><meta name="description" content="Atlantis 2017 ACM ICPC North Central North America Regional Contest​" /><meta property="og:description" content="Atlantis 2017 ACM ICPC North Central North America Regional Contest​" /><link rel="canonical" href="https://cabbagecabbagecabbage.github.io/posts/Problem-Analysis-6/" /><meta property="og:url" content="https://cabbagecabbagecabbage.github.io/posts/Problem-Analysis-6/" /><meta property="og:site_name" content="Rayton’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-04T07:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Problem Analysis 6" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-01T23:23:04-04:00","datePublished":"2022-01-04T07:00:00-05:00","description":"Atlantis 2017 ACM ICPC North Central North America Regional Contest​","headline":"Problem Analysis 6","mainEntityOfPage":{"@type":"WebPage","@id":"https://cabbagecabbagecabbage.github.io/posts/Problem-Analysis-6/"},"url":"https://cabbagecabbagecabbage.github.io/posts/Problem-Analysis-6/"}</script><title>Problem Analysis 6 | Rayton's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Rayton's Blog"><meta name="application-name" content="Rayton's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://cdn.discordapp.com/attachments/776252217270992906/991820620046282843/cabbage_3.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Rayton's Blog</a></div><div class="site-subtitle font-italic">Welcome!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/cabbagecabbagecabbage" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['rayton.chen','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Problem Analysis 6</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Problem Analysis 6</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1641297600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 4, 2022 </em> </span> <span> Updated <em class="" data-ts="1656732184" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 1, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/cabbagecabbagecabbage">Rayton Chen</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2037 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h1 id="atlantis"><a href="https://open.kattis.com/problems/atlantis">Atlantis</a></h1><p>2017 ACM ICPC North Central North America Regional Contest​</p><h2 id="problem-statement"><span class="mr-2">Problem Statement</span><a href="#problem-statement" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="task-description"><span class="mr-2">Task Description</span><a href="#task-description" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>​You may have heard of the lost city of Atlantis. As legend goes, Atlantis was a city of great wealth and power. Then the Gods became displeased with Atlantis and sank it into the ocean. What you may not have heard is the story of Demetrios, the only person in Atlantis with a ship at the time the city was pushed underwater.</p><p>Demetrios was an incredibly selfish man and thought of only one thing when he noticed the water level in the city rising: collecting the wealth of accessible gold in Atlantis and transporting it into his ship before the treasure was lost forever. Luckily for Demetrios, when the water level began rising, the many guards keeping safe the gold stores abandoned their posts to seek safety.</p><p>Demetrios knows the location of every gold store in Atlantis and how long it will take him to get to a particular store and back to his ship. He also knows the altitude at which each gold store resides, which determines when the store will be swallowed by the rising sea. The trouble is that he’s not sure he’ll have time to make it to every store before they become submerged. He now wonders the maximum number of stores he can visit prior to their respective submersion, if he picks his schedule optimally.</p><p>During the 2017 NCNA Regional, the following clarification was posted: “Important: The gold store must remain above water during the ENTIRE trip to and from the store.”</p><h3 id="input"><span class="mr-2">Input</span><a href="#input" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The first line of input will contain the integer $n$, $(1 \leq n \leq 200000)$, the number of gold stores in Atlantis. The next $n$ lines will contain two integers on each line, $t_i$ and $h_i$, $(1 \leq t_i,h_i \leq 10^9)$, the round-trip time in seconds it will take Demetrios to visit store $i$ and return to his ship with the gold, and the feet above sea level of store $i$, respectively.</p><h3 id="output"><span class="mr-2">Output</span><a href="#output" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Output the maximum number of gold stores Demetrios can visit such that each is visited prior to it becoming submerged. Assume sea level rises by one foot every second, starts at height $0$, and begins rising immediately.​</p><h2 id="analysis"><span class="mr-2">Analysis</span><a href="#analysis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="summary-of-the-problem-statement"><span class="mr-2">Summary of the Problem Statement</span><a href="#summary-of-the-problem-statement" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Let us extract the key information from the problem:</p><ul><li>The sea level rises one foot every second, starting at height $0$.<li>A store is defined by the time it takes to visit and its height.<li>If we visit a store, we must be able to return before it is submerged (i.e., the sea level rises above its height).</ul><p>We are given $n$ of these stores, and we must choose the largest possible subset of these stores to visit satisfying the condition above. ​ With a clear grasp of the problem, we can begin to make a few observations.</p><h3 id="part-1"><span class="mr-2">Part 1</span><a href="#part-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Since we are choosing some subset of stores to visit in some order, it is natural to consider whether the order in which we visit the stores matters with regards to whether it is possible to visit all the stores in the subset.</p><p>Suppose there are 2 stores we want to visit, Store A and Store B.</p><ul><li>Store A takes 3 seconds to visit and has height 4<li>Store B takes 1 second to visit and has height 2</ul><p>If we visit the stores in that order, we will find that Store B is already submerged when we return from Store A because it took 3 seconds to go to the first store, but it only took 2 seconds for Store B to submerge.</p><p>However, if we visit Store B first, we will be able to visit both stores because for Store A $1 \leq 2$ and for Store B $1+3 \leq 4$. Thus, we conclude that the order is indeed significant when determining whether it is possible to visit some set of stores.</p><p>Now let’s consider a general case. Suppose there are 2 stores we want to visit, Store A and Store B.</p><ul><li>Store A takes $t_A$ seconds to visit and has height $h_A$.<li>Store B takes $t_B$ seconds to visit and has height $h_B$.</ul><p>Again, there are 2 possible orders in which we can visit both.</p><ol><li>If we visit Store A then Store B, $t_A \leq h_A$ and $t_A+t_B \leq h_B$ must hold. Let’s call this Order 1.<li>If we visit Store B then Store A, $t_B \leq h_B$ and $t_B+t_A \leq h_A$ must hold. Let’s call this Order 2. ​</ol><p><a href="https://en.wikipedia.org/wiki/Without_loss_of_generality">Without loss of generality</a>, let us assume that $h_A ≥ h_B$. We can then separate into two cases:</p><ol><li>If $t_B &gt; h_B$<ol><li>Order 1 cannot visit both stores because $t_A+t_B \leq h_B$ is not possible.<li>Order 2 cannot visit both stores because $t_B \leq h_B$ is not possible.</ol><li>If $t_B \leq h_B$<ol><li>Order 1 can visit both stores if and only if $t_A+t_B \leq h_B$ (note that $t_A \leq h_A$ is a subset of this constraint because $h_A ≥ h_B$).<li>Order 2 can visit both stores if and only if $t_B+t_A \leq h_A$. ​ We can see that in the first case the 2 orders are equivalent with respect to visiting both stores. However, in the second case, $t_B+t_A \leq h_A$ is at least as “loose” of a constraint as $t_A+t_B \leq h_B$ because of our assumption $h_A ≥ h_B$. Therefore, Order 2 is at least as good as, if not better than Order 1 when determining whether it is possible to visit both stores.</ol></ol><p>Note: in the case that visiting both stores is not possible in either order and we are only visiting one of the stores, the order does not matter, which means our conclusion still holds. ​ With this example, we have shown that given any two stores, it is optimal to consider them in order of non-decreasing height. In layman’s terms, we are essentially saying “we should visit the stores that will submerge faster first”, which is actually pretty intuitive.</p><p>Therefore, we should sort all $n$ stores in order of non-decreasing height and consider whether or not to include them in our subset in that order. With this insight, we can now rephrase the problem: Given the sorted sequence of $n$ stores, find the longest subsequence of stores such that every store in the subsequence can be visited before it submerges. ​ Formally, we now need to find the longest sequence $i_1, i_2, …, i_l$ $(1 \leq l \leq n)$ such that</p>\[\sum_{k=1}^{j} t_{i_k} \leq h_{i_j}\]<p>for all $1 \leq j \leq l$. ​</p><h3 id="part-2"><span class="mr-2">Part 2</span><a href="#part-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A quick glance at the constraints on $n$ $(1 \leq n \leq 2 \times 10^5)$ and the values of $t_i$ and $h_i$ $ (1 \leq t_i, h_i \leq 10^9) $ rules out any brute force or dynamic programming solutions. Therefore, it is natural to wonder whether it is possible to greedily decide whether or not to include a store in our subsequence as we iterate through the $n$ sorted stores.</p><p>Suppose we had 3 stores we can choose from to visit (sorted in non-decreasing height), as follows:</p><ul><li>Store A takes 3 seconds to visit and has height 3.<li>Store B takes 2 seconds to visit and has height 4.<li>Store C takes 3 seconds to visit and has height 5.</ul><p>If we consider the stores in order and include a store whenever it is feasible, we would greedily visit Store A since $3 \leq 3$. However, when we get to Store B we will find that $3 + 2 &gt; 4$ and when we get to Store C we will find that $3 + 3 &gt; 5$; neither can be visited after visiting Store A.</p><p>Instead, if we skipped over Store A and considered the rest of the stores in order, we will find that it is possible to visit both Store B and Store C since $2 \leq 4$ and $2 + 3 \leq 5$. From this, we can conclude that the naïve greedy strategy is not optimal.</p><p>However, the idea of skipping over stores that hinder our optimality may prove very valuable to us. What if we include every store in our subsequence, then skip over as few stores as possible such that our subsequence satisfies the condition (see end of Part 1)? (Note: we want to remove as few stores as possible because we want the longest possible subsequence as our answer)</p><p>Two questions that arise from this idea would be</p><ul><li>“When do we need to skip over stores?”<li>“Which stores should we skip over to optimize our answer?”</ul><p>Suppose we are iterating through the stores and including every store in our subsequence as described. At some point, we may find that the sum of all the visiting times exceeds the height of the current store. This means that it is impossible to visit all the stores in our subsequence, and thus we need to skip over one or more of them so that the condition is satisfied.</p><p>When deciding which stores should be skipped over, the following insight is crucial: every store contributes equally to our answer (the length of the subsequence), but the more time it takes to visit a store, the more it hinders our ability to include more stores because it increases the total time that is used to compare against the heights. Therefore, we should skip over the stores that take the longest to visit first until our subsequence satisfies the condition again.</p><p>Furthermore, we can observe that if we continuously maintain a valid subsequence, we will never have to skip over more than one store whenever we include a new store. This is because we are considering the maximum time including the time to visit the store we just included, and since we started with a valid subsequence, skipping over this store or any store that takes at least as long to visit as this store will ensure that we result in a valid subsequence again.</p><h2 id="final-algorithm"><span class="mr-2">Final Algorithm</span><a href="#final-algorithm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Piecing together the observations from Parts 1 and 2, we have the following algorithm outline:</p><h3 id="pseudocode"><span class="mr-2">Pseudocode</span><a href="#pseudocode" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>Sort the stores in non-decreasing order.
Iterate through the stores in order
For each store:
    Include the store in our subsequence and increment answer.
    If the total time exceeds the height of the current store
	Exclude the store in our subsequence that takes the longest to visit and decrement answer
</pre></table></code></div></div><h3 id="choosing-a-data-structure"><span class="mr-2">Choosing a Data Structure</span><a href="#choosing-a-data-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now we just need a data structure that supports sub-linear time insertions and extractions for maximum. One such data structure is binary heap (implemented as std::priority_queue in C++), which supports $O(\log n)$ inserts and extractions.</p><h3 id="sample-implementation-in-c"><span class="mr-2">Sample Implementation in C++</span><a href="#sample-implementation-in-c" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;queue&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">stores</span><span class="p">[</span><span class="mi">200005</span><span class="p">];</span> <span class="c1">//pairs of {height, time}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">n</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
		<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">stores</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span> <span class="o">&gt;&gt;</span> <span class="n">stores</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">sort</span><span class="p">(</span><span class="n">stores</span><span class="p">,</span> <span class="n">stores</span> <span class="o">+</span> <span class="n">n</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">totaltime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">priority_queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">pq</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
		<span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">stores</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">);</span>
		<span class="n">totaltime</span> <span class="o">+=</span> <span class="n">stores</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">totaltime</span> <span class="o">&gt;</span> <span class="n">stores</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span><span class="p">){</span>
			<span class="o">--</span><span class="n">ans</span><span class="p">;</span>
			<span class="n">totaltime</span> <span class="o">-=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ans</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>	
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The final time complexity is $O(n\log n)$.</p><hr /><h2 id="comments"><span class="mr-2">Comments</span><a href="#comments" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>The official solution slides can be found here: <a href="https://cs.uwaterloo.ca/~bcsandlu/NCNA17slides.pdf">NCNA17slides.pdf (uwaterloo.ca)</a>. This analysis was inspired by the solution shown on slide 23.<li>The process of proving that sorting the stores in order of non-decreasing height is optimal (see Part 1) is very similar to the proofs in exchange argument dynamic programming problems. see <a href="https://codeforces.com/blog/entry/63533">Lecture #3 — Exchange arguments (sorting with dp) - Codeforces</a>.<li>Most other greedy algorithms choose the locally optimal choice at each step of the algorithm, but this greedy algorithm is creative because it chooses all the stores to visit at first, then removes the worst ones, making it much easier to prove correct and implement. I find this solution very clever.<li>Like the first problem presented in the series, I discovered this problem through the “CCC Training Camp” problem set curated by <a href="https://dmoj.ca/user/xiaowuc1" target="_blank">Nick Wu</a>. The full list of problems can be found <a href="https://amolina.ca/bojlist/camp-vert" target="_blank">here</a>.</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/academic/'>Academic</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/competitive-programming/" class="post-tag no-text-decoration" >competitive-programming</a> <a href="/tags/problem-analysis-series/" class="post-tag no-text-decoration" >problem-analysis-series</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="" data-toggle="tooltip" data-placement="top" title="" target="_blank" rel="noopener" aria-label=""> <i class="fa-fw "></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/My-Competitive-Programming-Journey/">My Competitive Programming Journey</a><li><a href="/posts/Problem-Analysis-0/">Introduction to the Problem Analysis Series</a><li><a href="/posts/Problem-Analysis-3/">Problem Analysis 3</a><li><a href="/posts/Problem-Analysis-4/">Problem Analysis 4</a><li><a href="/posts/Problem-Analysis-5/">Problem Analysis 5</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/competitive-programming/">competitive-programming</a> <a class="post-tag" href="/tags/problem-analysis-series/">problem-analysis-series</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Problem-Analysis-0/"><div class="card-body"> <em class="small" data-ts="1636718400" data-df="ll" > Nov 12, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Introduction to the Problem Analysis Series</h3><div class="text-muted small"><p> Note From the Future This series of six blog posts was originally a submission to the EWC4U course. Shout-out to Ms. D for allowing me to write about such a technical topic for this unit! I’ll ma...</p></div></div></a></div><div class="card"> <a href="/posts/Problem-Analysis-1/"><div class="card-body"> <em class="small" data-ts="1638705600" data-df="ll" > Dec 5, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Problem Analysis 1</h3><div class="text-muted small"><p> Chocolate Polish Olympiad in Informatics 2002/2003 Stage 1 Problem 2 Problem Statement Task Description We are given a bar of chocolate composed of $m \times n$ square pieces. One should break t...</p></div></div></a></div><div class="card"> <a href="/posts/Problem-Analysis-2/"><div class="card-body"> <em class="small" data-ts="1640520000" data-df="ll" > Dec 26, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Problem Analysis 2</h3><div class="text-muted small"><p> Odašiljači (Transmitters) Croatian Open Competition in Informatics ‘20 Contest 2 Problem #2 Problem Statement Sadly, this is the last time Sean will play James Bond. His mission is to network $n...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Problem-Analysis-5/" class="btn btn-outline-primary" prompt="Older"><p>Problem Analysis 5</p></a> <a href="/posts/My-Competitive-Programming-Journey/" class="btn btn-outline-primary" prompt="Newer"><p>My Competitive Programming Journey</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/cabbagecabbagecabbage">Rayton Chen</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/competitive-programming/">competitive-programming</a> <a class="post-tag" href="/tags/problem-analysis-series/">problem-analysis-series</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
